---
# lit.rhel.xrdp
# RHEL9-focused XRDP server role (remote desktop over RDP).

xrdp_enabled: true

xrdp_listen_address: "0.0.0.0"
xrdp_listen_port: 3389

xrdp_firewalld_manage: true
xrdp_firewalld_zone: "admin"
xrdp_firewalld_state: "enabled"

xrdp_selinux_manage: true
xrdp_selinux_type: "ms-wbt-server"
xrdp_selinux_proto: "tcp"

# Desktop/session handling
# This role primarily installs/configures XRDP. A desktop environment must exist.
xrdp_desktop: "auto"                 # auto | gnome | xfce | custom
xrdp_install_desktop: false          # try to install desktop (GNOME group); XFCE best-effort
xrdp_custom_startwm: ""              # when xrdp_desktop=custom (e.g. "exec /usr/bin/startxfce4")

# TLS
xrdp_tls_enable: true
xrdp_tls_cert_path: "/etc/xrdp/cert.pem"
xrdp_tls_key_path: "/etc/xrdp/key.pem"
xrdp_tls_generate_self_signed: true
xrdp_tls_subject: "/CN={{ inventory_hostname }}"
xrdp_tls_days: 825

xrdp_packages:
  - xrdp
  - xorgxrdp
  - policycoreutils-python-utils

xrdp_optional_packages:
  - xrdp-selinux
  - pulseaudio-module-xrdp

xrdp_no_log: false
